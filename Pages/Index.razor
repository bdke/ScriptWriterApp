@page "/"
@namespace ScriptWriterApp.Pages
@using Radzen.Blazor.Rendering
@using Microsoft.EntityFrameworkCore

<PageTitle>Scripter</PageTitle>

<h3 class="text-center mt-2">Change Histories</h3>
<RadzenDataGrid class="mt-2" AllowFiltering="true" AllowColumnResize="true" FilterMode="FilterMode.Advanced" AllowSorting="true" PageSize="5" AllowPaging="true" PagerHorizontalAlign="HorizontalAlign.Left" ShowPagingSummary="true"
    Data="@changes" TItem="ChangeHistory" ColumnWidth="300px" LogicalFilterOperator="LogicalFilterOperator.Or">
    <Columns>
        <RadzenDataGridColumn TItem="ChangeHistory" Property="ID" Filterable="false" Title="ID" Frozen="true" Width="70px" TextAlign="TextAlign.Center" />
        <RadzenDataGridColumn TItem="ChangeHistory" Property="DateTime" Filterable="false" Title="Date" Frozen="true" Width="70px" TextAlign="TextAlign.Center" />
        <RadzenDataGridColumn TItem="ChangeHistory" Property="FilePath" Filterable="false" Title="Location" Frozen="true" Width="70px" TextAlign="TextAlign.Center" />
        <RadzenDataGridColumn TItem="ChangeHistory" Property="Origin" Filterable="false" Title="Original Text" Frozen="true" Width="70px" TextAlign="TextAlign.Center" />
        <RadzenDataGridColumn TItem="ChangeHistory" Property="Modified" Filterable="false" Title="Modified Text" Frozen="true" Width="70px" TextAlign="TextAlign.Center" />
    </Columns>
</RadzenDataGrid>



@code {
    [Inject] private AppDbContext context { get; set; }
    private List<ChangeHistory> changes = new List<ChangeHistory>();

    protected override async Task OnInitializedAsync()
    {
        changes = await context.ChangeHistories.ToListAsync();
        changes.Add(new ChangeHistory { ID = 0, DateTime = DateTime.Now, FilePath = @"./", Modified = "???", Origin = "Lmao" });
        changes.Add(new ChangeHistory { ID = 1, DateTime = DateTime.Now, FilePath = @"./", Modified = "???", Origin = "Lmao" });
        changes.Add(new ChangeHistory { ID = 2, DateTime = DateTime.Now, FilePath = @"./", Modified = "???", Origin = "Lmao" });
        changes.Add(new ChangeHistory { ID = 3, DateTime = DateTime.Now, FilePath = @"./", Modified = "???", Origin = "Lmao" });
        changes.Add(new ChangeHistory { ID = 4, DateTime = DateTime.Now, FilePath = @"./", Modified = "???", Origin = "Lmao" });
    }
}
